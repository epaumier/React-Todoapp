(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(53)},35:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(15),o=a.n(l),i=(a(35),a(7)),r=a(8),c=a(10),u=a(9),m=a(11),d=a(5),p=a(54),h=a(55),g=a(57),b=a(3),v=function(){return s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(b.h,{fluid:!0},s.a.createElement(b.d,{fluid:!0},s.a.createElement("h1",{className:"display-3"},"Welcome to my TodoApp"),s.a.createElement("p",{className:"lead"},"This is yet another boring todoapp. I also added user authentication and data storage."),s.a.createElement("p",{className:"lead"},"My stack for this project: React (CRA v2) and Firebase"))))},f=a(12),w=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(b.j,{value:this.props.value,onClick:this.props.deleteTask},this.props.itemText)}}]),t}(s.a.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(b.j,{style:{textDecoration:"line-through"},value:this.props.value,onClick:this.props.RestoreTask},this.props.itemText))}}]),t}(s.a.Component),y=a(23),O=a.n(y);a(44),a(46);O.a.initializeApp({apiKey:"AIzaSyCWB5BRRdpPysu3LKEM0QYXgSBFsmQqTh8",authDomain:"todo-2dc22.firebaseapp.com",databaseURL:"https://todo-2dc22.firebaseio.com",storageBucket:"todo-2dc22.appspot.com"});var j=O.a,k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).deleteTask=function(e){var t=e.target.value,n=a.state.tasklist.slice();if(console.log("todos"),console.log(n),console.log("state deletedlist"),console.log(a.state.deletedlist),Array.isArray(a.state.deletedlist)&&a.state.deletedlist.length){var s=a.state.deletedlist.slice();s.push(n[t]),n.splice(t,1),a.setState({tasklist:n,deletedlist:s}),j.database().ref("/todoapp/users/"+a.state.uid+"/activelist/").set({todos:n}),j.database().ref("/todoapp/users/"+a.state.uid+"/deletedlist/").set({todos:s})}else{var l=[];l.push(n[t]),n.splice(t,1),a.setState({tasklist:n,deletedlist:l,emptydellist:!1}),j.database().ref("/todoapp/users/"+a.state.uid+"/deletedlist/").set({todos:l}),j.database().ref("/todoapp/users/"+a.state.uid+"/activelist/").set({todos:n})}0===n.length&&a.setState({emptytasklist:!0})},a.RestoreTask=function(e){var t=e.target.value;console.log("i"),console.log(t);var n=a.state.tasklist.slice(),s=a.state.deletedlist.slice(),l=s[t];console.log("todotorestore"),console.log(l),n.push(l),s.splice(t,1),a.setState({tasklist:n,deletedlist:s,emptytasklist:!1}),j.database().ref("/todoapp/users/"+a.state.uid+"/activelist/").set({todos:n}),j.database().ref("/todoapp/users/"+a.state.uid+"/deletedlist/").set({todos:s}),0===s.length&&a.setState({emptydellist:!0})},a.CreateTask=function(e){if("Enter"===e.key){var t=a.state.tasklist,n=a.state.tasklist;if(Array.isArray(t)&&t.length){var s={itemId:Date.now(),itemText:e.target.value};n.push(s),console.log("NewTasklist"),console.log(n),a.setState({tasklist:n,NewInputValue:""}),j.database().ref("/todoapp/users/"+a.state.uid+"/activelist/").set({todos:t})}else{var l=[],o={itemId:Date.now(),itemText:e.target.value};l.push(o),console.log("NewEntry"),console.log(o),a.setState({tasklist:l,NewInputValue:"",emptytasklist:!1}),j.database().ref("/todoapp/users/"+a.state.uid+"/activelist/").set({todos:l})}}},a.state={tasklist:[],NewInputValue:"",uid:"",emptytasklist:!1,emptydellist:!1,deletedlist:[],collapse:!1},a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.toggle=a.toggle.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"LoadUserID",value:function(){var e=this;j.auth().onAuthStateChanged(function(t){if(t){var a=t.uid;console.log("currentuid"),console.log(a),e.setState({uid:a});var n=j.database().ref("/todoapp/users/"+e.state.uid+"/activelist/todos");j.database().ref("/todoapp/users/"+e.state.uid+"/deletedlist/todos").once("value").then(function(t){var a=t.val();null==a&&e.setState({emptydellist:!0}),e.setState({deletedlist:a})}),n.once("value").then(function(t){var a=t.val();null==a?e.setState({emptytasklist:!0}):(console.log("Etat de la DB initiale"),console.log(a),e.setState({tasklist:a}))})}else console.log("no one is logged in")}).bind(this)}},{key:"componentDidMount",value:function(){this.LoadUserID()}},{key:"componentWillUnmount",value:function(){this.LoadUserID()}},{key:"toggle",value:function(){this.setState({collapse:!this.state.collapse})}},{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"render",value:function(){var e=this;console.log("Etat de la liste des t\xe2ches"),console.log(this.state.tasklist),console.log("Etat du champs de saisie (input)"),console.log(this.state.NewInputValue);var t=this.state.tasklist,a=this.state.deletedlist;console.log("Etat de data"),console.log(t),console.log("Etat de data"),console.log(t);var n=this.state.emptytasklist,l=this.state.emptydellist;return s.a.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"center",marginLeft:"auto",marginRight:"auto",marginTop:"10%"}},s.a.createElement("div",{className:"Input"},s.a.createElement(b.g,{value:this.state.NewInputValue,name:"NewInputValue",placeholder:"Enter Task",onChange:this.handleChange,onKeyPress:this.CreateTask,style:{textAlign:"center",width:"30%",marginLeft:"auto",marginRight:"auto"}})),s.a.createElement("div",null,n?s.a.createElement("h2",{style:{marginTop:"5rem"}},"The todolist is empty..."):s.a.createElement(b.i,{className:"List",style:{textAlign:"center",width:"40%",marginLeft:"auto",marginRight:"auto",paddingTop:"2rem"}},t.map(function(t,a){return s.a.createElement(w,{itemText:t.itemText,key:t.itemId,value:a,deleteTask:e.deleteTask.bind(e)})}))),s.a.createElement("div",null,l?s.a.createElement("div",null):s.a.createElement("div",null,s.a.createElement(b.b,{color:"primary",onClick:this.toggle,style:{marginBottom:"1rem",width:"30%",marginLeft:"auto",marginRight:"auto",marginTop:"2rem"}},"Deleted Todos"),s.a.createElement(b.c,{isOpen:this.state.collapse},s.a.createElement(b.i,{className:"List",style:{textAlign:"center",width:"40%",marginLeft:"auto",marginRight:"auto",paddingTop:"2rem"}},a.map(function(t,a){return s.a.createElement(E,{itemText:t.itemText,key:t.itemId,value:a,RestoreTask:e.RestoreTask.bind(e)})}))))))}}]),t}(s.a.Component),S=Object(g.a)(k),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){var t=a.state.email,n=a.state.passwordOne,s=a.state.username;j.auth().createUserWithEmailAndPassword(t,n).then(function(){var e=j.auth().currentUser.uid;a.props.history.push({pathname:"../pages/TodoList"}),j.database().ref("/todoapp/users/"+e).set({username:s,email:t}),j.database().ref("/todoapp/users/"+e+"/activelist/").set({todos:[]})}).catch(function(e){a.setState({emailalreadyinuse:!1});var t=e.code,n=e.message;"auth/email-already-in-use"===t?a.setState({emailalreadyinuse:!0}):alert(n)}),e.preventDefault()},a.state={username:"",email:"",passwordOne:"",passwordTwo:"",error:null,uid:"",emailalreadyinuse:!1},a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a.username=a.username.bind(Object(d.a)(Object(d.a)(a))),a.email=a.username.bind(Object(d.a)(Object(d.a)(a))),a.passwordOne=a.username.bind(Object(d.a)(Object(d.a)(a))),a.passwordTwo=a.username.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"username",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"email",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"passwordOne",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"passwordTwo",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,l=e.passwordTwo,o=e.error,i=n!==l||""===n||""===a||""===t;return console.log("this.state.username"),console.log(this.state.username),console.log("this.state.email"),console.log(this.state.email),console.log("this.state.passwordOne"),console.log(this.state.passwordOne),s.a.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"center",width:"30%",marginLeft:"auto",marginRight:"auto",marginTop:"10%"}},s.a.createElement("h2",{style:{paddingBottom:"2rem"}},"Time to Sign Up !"),s.a.createElement(b.e,{onSubmit:this.onSubmit},s.a.createElement(b.f,null,s.a.createElement(b.g,{value:this.state.username,name:"username",onChange:this.username,type:"text",placeholder:"Username",autoComplete:"username"})),s.a.createElement(b.f,null,s.a.createElement(b.g,{value:this.state.email,name:"email",onChange:this.email,type:"text",placeholder:"Email Address",autoComplete:"email"})),s.a.createElement(b.f,null,s.a.createElement(b.g,{value:this.state.passwordOne,name:"passwordOne",onChange:this.passwordOne,type:"password",placeholder:"Password",autoComplete:"new-password"})),s.a.createElement(b.f,null,s.a.createElement(b.g,{value:this.state.passwordTwo,name:"passwordTwo",onChange:this.passwordTwo,type:"password",placeholder:"Confirm Password",autoComplete:"new-password"})),s.a.createElement(b.b,{disabled:i,type:"submit"},"Sign Up"),o&&s.a.createElement("p",null,o.message)),this.state.emailalreadyinuse&&s.a.createElement(b.a,{color:"danger"},"Email already in use !"))}}]),t}(s.a.Component),T=Object(g.a)(C),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){j.auth().signInWithEmailAndPassword(a.state.email,a.state.password).then(function(){a.props.history.push({pathname:"../pages/TodoList",state:{isLoggedIn:!0,username:a.state.username,bidule:a.state.bidule}})}).catch(function(e){a.setState({wrongpassword:!1,invalidemail:!1});var t=e.code,n=e.message;"auth/wrong-password"===t?(console.log("Wrong password."),a.setState({wrongpassword:!0})):"auth/invalid-email"===t?(console.log("Invalid Email"),a.setState({invalidemail:!0})):alert(n),console.log(e)}),e.preventDefault()},a.state={email:"",password:"",error:null,wrongpassword:!1,invalidemail:!1},a.onSubmit=a.onSubmit.bind(Object(d.a)(Object(d.a)(a))),a.email=a.email.bind(Object(d.a)(Object(d.a)(a))),a.password=a.password.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"email",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"password",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,l=""===t||""===a;return s.a.createElement("div",{className:"Input",style:{display:"flex",flexDirection:"column",textAlign:"center",width:"30%",marginLeft:"auto",marginRight:"auto",marginTop:"10%"}},s.a.createElement("h2",{style:{paddingBottom:"2rem"}},"Please Sign in"),s.a.createElement(b.e,{onSubmit:this.onSubmit},s.a.createElement(b.f,null,s.a.createElement(b.g,{value:this.state.email,name:"email",onChange:this.email,type:"email",placeholder:"Enter Email",autoComplete:"email"})),s.a.createElement(b.f,null,s.a.createElement(b.g,{value:this.state.password,name:"password",onChange:this.password,type:"password",placeholder:"Enter Password",autoComplete:"current-password"})),s.a.createElement(b.b,{disabled:l,type:"submit"}," Sign In "),n&&s.a.createElement("p",null,n.message)),s.a.createElement("div",{style:{marginTop:"2rem"}},this.state.wrongpassword&&s.a.createElement(b.a,{color:"danger"},"Wrong Password !"),this.state.invalidemail&&s.a.createElement(b.a,{color:"danger"},"Invalid Email !")))}}]),t}(s.a.Component),x=Object(g.a)(A),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",email:"",uid:"",newpassword:"",newusername:"",succesfulpw:!1,failedpw:!1,succesfulun:!1,failedun:!1},a.handleChangepw=a.handleChangepw.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeun=a.handleChangeun.bind(Object(d.a)(Object(d.a)(a))),a.SetNewPassword=a.SetNewPassword.bind(Object(d.a)(Object(d.a)(a))),a.SetNewUsername=a.SetNewUsername.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){j.auth().onAuthStateChanged(function(e){e&&this.setState({username:e.displayName,email:e.email,uid:e.uid})}.bind(this))}},{key:"handleChangepw",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"handleChangeun",value:function(e){var t=e.target.name;this.setState(Object(f.a)({},t,e.target.value))}},{key:"SetNewPassword",value:function(){var e=this,t=this.state.newpassword;j.auth().currentUser.updatePassword(t).then(function(){e.setState({succesfulpw:!0})}).catch(function(t){e.setState({failedpw:!0})})}},{key:"SetNewUsername",value:function(){var e=this;j.auth().currentUser.updateProfile({displayName:this.state.newusername}).then(function(){e.setState({succesfulun:!0,username:e.state.newusername})}).catch(function(t){e.setState({failedun:!0})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{style:{display:"flex",flexDirection:"column",textAlign:"center",width:"30%",marginLeft:"auto",marginRight:"auto",marginTop:"10%"}},s.a.createElement("h2",null,"Account"),s.a.createElement("div",{style:{padding:"2rem"}},s.a.createElement("p",null,"Username: ",this.state.username),s.a.createElement("p",null,"Email: ",this.state.email)),s.a.createElement("div",{style:{padding:"2rem"}},s.a.createElement("h5",null,"Change your Username"),s.a.createElement(b.g,{onChange:this.handleChangeun,value:this.state.newusername,name:"newusername",placeholder:"Type your new Username"}),s.a.createElement(b.b,{onClick:this.SetNewUsername,style:{marginTop:"1rem"}},"Submit"),this.state.succesfulun&&s.a.createElement("p",null,"Username changed !"),this.state.failedun&&s.a.createElement("p",null,"Something went wrong...")),s.a.createElement("div",{style:{padding:"2rem"}},s.a.createElement("h5",null,"Change your password"),s.a.createElement(b.g,{onChange:this.handleChangepw,value:this.state.newpassword,name:"newpassword",placeholder:"Type your new password"}),s.a.createElement(b.b,{onClick:this.SetNewPassword,style:{marginTop:"1rem"}},"Submit"),this.state.succesfulpw&&s.a.createElement("p",null,"Password changed !"),this.state.failedpw&&s.a.createElement("p",null,"Something went wrong..."))))}}]),t}(s.a.Component),L=Object(g.a)(I),N=function(){return s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement("h1",{className:"display-3"},"Something went wrong"))},U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClick=function(e){e.preventDefault(),j.auth().signOut().then(function(){console.log("Sign-out successful.")}).catch(function(e){console.log("An error happened.")}),a.props.history.push("./About"),a.setState({isLoggedIn:!1})},a.state={date:new Date,isLoggedIn:!1,username:""},a.onClick=a.onClick.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authFirebaseListener=j.auth().onAuthStateChanged(function(t){if(t){var a=e,n=t.uid;j.database().ref("todoapp/users/"+n).once("value").then(function(e){var t=e.val()&&e.val().username||"Anonymous";a.setState({username:t,isLoggedIn:!0})})}else e.setState({isLoggedIn:!1})})}},{key:"componentWillUnmount",value:function(){this.authFirebaseListener&&this.authFirebaseListener()}},{key:"render",value:function(){var e=this.state.isLoggedIn;return console.log("username app.js"),console.log(this.state.username),s.a.createElement("div",null,s.a.createElement("div",null,e?s.a.createElement("div",null,s.a.createElement(b.n,{color:"light",light:!0,expand:"md"},s.a.createElement(b.o,{href:"/"},"Todo App"),s.a.createElement(b.k,{className:"ml-auto",navbar:!0},s.a.createElement(b.l,null,s.a.createElement(b.m,{tag:p.a,to:"/pages/About"},"About")),s.a.createElement(b.l,null,s.a.createElement(b.m,{tag:p.a,to:"/pages/TodoList"},"Todo List")),s.a.createElement(b.l,null,s.a.createElement(b.m,{tag:p.a,to:"/Pages/Account"},this.state.username)),s.a.createElement(b.l,null,s.a.createElement(b.b,{onClick:this.onClick,color:"light"},"Sign Out"))))):s.a.createElement(b.n,{color:"light",light:!0,expand:"md"},s.a.createElement(b.o,{href:"/"},"Todo App"),s.a.createElement(b.k,{className:"ml-auto",navbar:!0},s.a.createElement(b.l,null,s.a.createElement(b.m,{tag:p.a,to:"/pages/About"},"About")),s.a.createElement(b.l,null,s.a.createElement(b.m,{tag:p.a,to:"/pages/SignIn"},"Sign In")),s.a.createElement(b.l,null,s.a.createElement(b.m,{tag:p.a,to:"/pages/SignUp"},"Sign Up"))))),s.a.createElement("div",null,s.a.createElement(h.a,{exact:!0,path:"/",component:v}),s.a.createElement(h.a,{path:"/pages/About",component:v}),s.a.createElement(h.a,{path:"/pages/TodoList",component:S}),s.a.createElement(h.a,{path:"/pages/SignIn",component:x}),s.a.createElement(h.a,{path:"/pages/Account",component:L}),s.a.createElement(h.a,{path:"/pages/SignUp",component:T}),s.a.createElement(h.a,{path:"/pages/404",component:N})))}}]),t}(s.a.Component),D=Object(g.a)(U),P=(a(51),a(56));o.a.render(s.a.createElement(P.a,null,s.a.createElement(D,null)),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.d4b259ee.chunk.js.map